# Chapter 1 플랫폼 개발팀으로 발령나다

- [Chapter 1 플랫폼 개발팀으로 발령나다](#chapter-1-플랫폼-개발팀으로-발령나다)
  * [1. 임베디드 시스템이란?](#1-임베디드-시스템이란)
  * [2. 임베디드 시스템의 구현](#2-임베디드-시스템의-구현)
  * [3. 임베디드 소프트웨어 개발방법](#3-임베디드-소프트웨어-개발방법)
    + [네이티브 개발 환경](#네이티브-개발-환경)
    + [크로스 개발 환경](#크로스-개발-환경)
      - [툴체인(tool chain)](#툴체인tool-chain)
      - [크로스 컴파일 과정](#크로스-컴파일-과정)
  * [4. 프로그램을 어떻게 타겟 시스템으로 옮기나](#4-프로그램을-어떻게-타겟-시스템으로-옮기나)
  * [5. 임베디드 소프트웨어의 실행](#5-임베디드-소프트웨어의-실행)
    + [스타트업 코드 (startup code)](#스타트업-코드-startup-code)

## 1. 임베디드 시스템이란
PC : 범용 목적의 컴퓨터 </br>
임베디드 시스템 : 특정한 목적을 가지고 설계

## 2. 임베디드 시스템의 구현 
PC에는 주로 인텔 계엘의 프로세서가 사용 </br>
임베디드 시스템에 사용되는 프로세서는 많다 (ARM, MIPS, StrongARM...)

## 3. 임베디드 소프트웨어 개발방법
PC들과 하드웨어 구성이 다르다.

입출력 장치는 키보드나 모니터가 아닌 LED, LCD, 스위치 등으로 사용</br>
메모리도 ROM/Flash, RAM으로 구성

### 네이티브 개발 환경
PC용 소프트웨어를 개발할 때는 개발환경과 실행환경이 같다.
즉 개발하는 시스템의 프로세서와 프로그램이 실행될 시스템의 프로세서가 같다.

### 크로스 개발 환경 
임베디드 소프트웨어 개발환경은 개발하는 시스템의 프로세서와 실행될 시스템의 프로세서가 같지 않음
즉, 임베디드 소프트웨어를 개발하려면 개발환경과 다른 프로세서용 기계코드를 생성해주는 컴파일러가 필요하다, 이를 **크로스 컴파일러** 라고 한다.
(ex : arm-linux-gcc, ADS 등)

- **호스트 시스템** : 소프트웨어를 개발하는 환경
- **타겟 시스템**   : 소프트웨어가 실행되는 환경

#### 툴체인(tool chain)
크로스 컴파일러나 크로스 어셈블러를 사용하는 **개발 툴** </br>
(크로스 컴파일러, 크로스 어셈블러, 링커/로케이터 등)

#### 크로스 컴파일 과정
    test.c -> [전처리기] -> test.i -> [크로스 컴파일러] -> test.s -> 
    [크로스 어셈블러] -> test.o -> [링커] -> [로케이터] -> test(실행파일)

 - **로케이트** : 오브젝트 파일을 실행 가능한 바이너리 이미지로 변환

타켓 보드의 메모리 정보를 로케이터에 알려주어야, 실제 메모리 주소를 할당할 수 있다. 
로케이트는 프로그램 코드와 데이터 섹션들에 실제 메모리 주소를 할당하는 과정이다.

타켓 보드의 메모리 정보는 컴파일러 옵션을 이용하여 설정하거나, 스크립트 파일을 사용한다. **링커 스크립트**에는 롬의 시작 주소와 램의 시작 주소, 각 섹션의 시작과 끝을 나타내는 심볼들로 구성되어 있다.

## 4. 프로그램을 어떻게 타겟 시스템으로 옮기나
**시리얼 케이블** (UART 통신 : Universal Asynchronous Receive/Transmitter 범용 비동기화 송수신기)
</br> 시스템 콘솔을 사용해 확인 가능, 모니터링 및 디버깅 가능 

**JTAG 케이블**
</br> 프로그램 다운로드, 플래시 메모리에 프로그램 탑재, 레지스터 값 읽기, 프로그램 스텝으로 작동 등 디버깅 가능

**이더넷 / USB 케이블**

## 5. 임베디드 소프트웨어의 실행 
C 프로그램이 작동하려면 **초기화 작업**이 필요

### **스타트업 코드 (startup code)**
PC 전원 -> 하드웨어 초기화 -> 운영체제 프로그램 RAM에 로딩 후 실행 (부팅 작업)
</br> 인터럽트 벡터 테이블 생성, 메모리 검사, C 프로그램에 사용할 스택, 힙 생성 후 초기화 (C 프로그램이 작동하기 위한 초기화 작업)

스타트업 코드를 개발자가 직접 만들거나, 시스템 회사에서 제공
