# Chapter 4 컴파일러 최적화, 너무 믿지 마세요
컴파일러 최적화 옵션을 level 4 까지 올렸을 때, 정상적이던 프로그램이 제대로 작동 되지 않는다.

## 1. 외부 요인에 의해 변하는 메모리를 위한 volatile
컴파일러가 필요없다고 생각하는 부분을 없애버린다.

하지만 직접적으로 코드에서 값을 대입하는 부분이 아닌, 주소값으로 부터 직접 접근하여 값을 가져오는 경우(ex 프로그램 외부에서 변수 값을 변경하는 경우), 컴파일러는 이를 이해하지 못한다. 

volatile의 기능적 의미는 **캐시 사용 안함** (무조건 RAM에 올려서 사용)

### 하드웨어에 의한 변경
메모리에서 직접 읽어야하므로, volatile을 사용해야한다. 

### 인터럽트에 의한 변경 
스위치를 누르거나 하는 인터럽트 

인터럽트 서비스 루틴이 하드웨어적으로 호출되므로, 컴파일러는 해당 루틴이 사용되지 않는 다고 판단한다. 

## 정리
volatile은 타입 한정자 

1. 하드웨어가 사용하는 메모리 선언 시 사용
2. 최적화 금지 용도
